# finbot

Телеграм бот для прогнозирования цен на акции и поиск оптимальной стратегии покупки/продажи.
При выбора тикера акции, бот загружает исторические данные, обучает несколько моделей машинного обучения (Random Forest, LSTM, Prophet) и строит прогноз на 30 дней вперед. На основе прогноза, бот рекомендует оптимальные точки входа и выхода для максимизации прибыли.

Бот поддеррживает только одну команду `/analysis`, которая приводит к началу диалога с вопросами о тикере и сумме инвестиций. Точно такое же поведение при базовой команде запуска бота `/start` или если просто отправить текст, это будет воспринято как тикер.

> Бот не является финансовым инструментом, результаты носят исключительно учебный характер.

## Что делает

- загружает данные с yahoo finance
- обучает 3 модели (lstm, prophet, random forest)
- выбирает лучшую по метрикам
- строит прогноз на 30 дней
- рекомендует когда покупать/продавать
- считает потенциальную прибыль

## Архитектура

```
.
├── bot.py - точка входа приложения и имплементация тг-бота
├── data.py - загрузка данных с Yahoo Finance в кэш
├── logger.py - хэлпер для логгирования в соотвествии с заданием
├── models - реализации моделей машинного обучения (название файла соответствует модели)
│   ├── lstm.py
│   ├── prophet_model.py
│   └── random_forest.py
├── strategy.py - реализация базовой жадной стратегии покупки/продажи
├── trainer.py - базовая ьизнес-логика: обучение моделей, выбор лучшей, прогнозирование, расчет стратегии
└── visualization.py - хэлпер для создания графика цен
```

## Запуск

1. Для запуска бота необходим установленный Python 3.11+ и [uv](https://docs.astral.sh/uv/).

2. Устанавливаем зависимости:
```bash
uv sync
```
3. Конфигигурируем:
```bash
cp .env.example .env
```
В файл `.env` в переменную `TELEGRAM_BOT_TOKEN` добавляем токен телеграм бота ([как получить свой токен](https://core.telegram.org/bots/tutorial#obtain-your-bot-token)).

4. Можно запускать:
```bash
uv run python bot.py
```


